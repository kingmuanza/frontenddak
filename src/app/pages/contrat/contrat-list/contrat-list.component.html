<div class="page">
  <div class="page-entete">
    <div class="page-entete-titre">
      Liste des contrats
    </div>
    <div class="boutons">
      <div class="row">
        <div class="col-lg-2" *ngIf="mesDroits.contratEdit">
          <div class="nouveau">
            <a routerLink="/contrat/edit" class="btn nouveau">
              Ajouter un contrat
            </a>
          </div>
        </div>
        <div class="col-lg-2">
          <button (click)="init()" class="btn primaire">Actualiser</button>
        </div>
        <div class="col-lg-3">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">
                Du
              </span>
            </div>
            <input [ngModel]="du | date:'yyyy-MM-dd'" (ngModelChange)="du = $event" type="date" class="form-control"
              [ngClass]="{'is-invalid': montrerErreurs && !du}">
          </div>
        </div>
        <div class="col-lg-3">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">
                Au
              </span>
            </div>
            <input [ngModel]="au | date:'yyyy-MM-dd'" (ngModelChange)="au = $event" type="date" class="form-control"
              [ngClass]="{'is-invalid': montrerErreurs && !au}">
          </div>
        </div>
        <div class="col-lg-2">
          <button (click)="rechercher()" class="btn primaire">Recherche</button>
        </div>
      </div>
    </div>
    <div class="boutons">
      <div class="row">
        <div class="col-lg-12">
          <div class="type">
            <input [title]="explication.encours" (ngModelChange)="afficherContrat($event)" [(ngModel)]="afficher"
              value="CREATION" type="radio" name="afficher">
            <span class="libelle-radio" [title]="explication.encours">
              {{nombres.encours ? nombres.encours: ""}}
              En cours de création
            </span>
            <input [title]="explication.cree" (ngModelChange)="afficherContrat($event)" [(ngModel)]="afficher"
              value="CREE" type="radio" name="afficher">
            <span [title]="explication.cree" class="libelle-radio">
              {{nombres.cree ? nombres.cree: ""}}
              Créés
            </span>
            <input [title]="explication.parfait" (ngModelChange)="afficherContrat($event)" [(ngModel)]="afficher"
              value="PARFAIT" type="radio" name="afficher">
            <span [title]="explication.parfait" class="libelle-radio">
              {{nombres.parfait ? nombres.parfait: ""}}
              Parfaits
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class=" page-contenu ">
    <div class="card shadow-1 ">
      <div class="page-contenu-corps ">
        <table datatable [dtOptions]="dtOptions " [dtTrigger]="dtTrigger " class="row-border hover ">
          <thead>
            <tr>
              <th>Dernière Modif.</th>
              <th>Libellé</th>
              <th>Date Signature</th>
              <th>Début</th>
              <th>Fin</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let contrat of resultats " (click)="edit(contrat.idcontrat) ">
              <td>
                <span>
                  {{toDate(contrat.date) | date: 'yyyy-MM-dd HH:mm'}}
                </span>
              </td>
              <td>{{contrat.libelle}}</td>
              <td>{{contrat.dateSignature | date: 'yyyy-MM-dd'}}</td>
              <td>{{contrat.dateDebut | date: 'yyyy-MM-dd'}}</td>
              <td>
                <ng-container *ngIf="contrat.dateFin">

                  {{contrat.dateFin}}
                </ng-container>
              </td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>
  </div>
